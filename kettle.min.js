/*!
  * kettle.js - copyright Jake Luer 2011
  * https://github.com/logicalparadox/kettle.js
  * MIT License
  */
!function(a,b){"undefined"==typeof drag&&(drag=require("drag")),"undefined"==typeof bean&&(bean=require("bean"));var c=drag,d=bean,e="ontouchstart"in b.documentElement?!0:!1;kettle=function(a){return new Kettle(c.select(a))},Kettle=function g(a){if(this instanceof g)this.el=a,this._axis="auto",this._track="track",this._handle="handle",this._mwspeed=10;else return new g(a)},Kettle.prototype.axis=function(a){if(a=="x"||a=="y"||a=="both"||a=="auto")this._axis=a;return this},Kettle.prototype.elastic=function(a){try{this._move=move,this._elastic=!0}catch(b){this._elastic=!1}return this},Kettle.prototype.bind=function(){var a=this,b=this.el,f=this.el.querySelector(".wrap"),g=this.el.querySelector(".track-x"),h=this.el.querySelector(".track-y"),i,j;return g&&(i=g.querySelector(".handle")),h&&(j=h.querySelector(".handle"),hYh=Math.round(c.value(h,"height")/c.value(f,"height")*100),yRatio=(c.value(f,"height")-c.value(this.el,"height"))/(c.value(h,"height")-hYh),c.value(j,"height",hYh+"px"),maxYc=(c.value(f,"height")-c.value(a.el,"height"))*-1,maxYh=c.value(h,"height")-c.value(j,"height")),this._sY=c(j).axis("y").container(h).dragging(function(){newY=Math.round(this.pos.y*yRatio)*-1,c.value(f,"top",newY+"px")}).bind(),d.add(this.el,"mousewheel",function(b){var d=b.wheelDeltaY/120*a._mwspeed,e=c.value(f,"top")+d,g=c.value(j,"top")+Math.round(d/yRatio*-1);e>0&&(e=0),e<maxYc&&(e=maxYc),g<0&&(g=0),g>maxYh&&(g=maxYh),c.value(f,"top",e+"px"),c.value(j,"top",g+"px"),b.preventDefault(),b.stopPropagation()}),e&&c(f).dragging(function(){this.pos.y>0&&c.value(f,"top","0px"),this.pos.y<maxYc&&c.value(f,"top",maxYc+"px");var a=Math.round(this.pos.y/yRatio*-1);a<0&&(a=0),a>maxYh&&(a=maxYh),c.value(j,"top",a+"px")}).end(function(){if(!a._elastic)return;if(this.pos.dY!==0){var b=.993,c=.1,d=Math.abs(this.pos.dY)/10,e=Math.log(c/d)/Math.log(b);e=e>0?Math.round(e):0;var g=(1-Math.pow(b,e+1))/(1-b),h=Math.round(d*g),i=this.pos.dY<0?this.pos.y-h:this.pos.y+h;i>0&&(i=0),i<maxYc&&(i=maxYc);var k=Math.round(i/yRatio*-1);k<0&&(k=0),k>maxYh&&(k=maxYh),a._move(f).set("top",i).duration(e).ease("cubic-bezier(0,0.1,0.15,1)").end(function(){a._move(f).duration(0).end()}),a._move(j).set("top",k).duration(e).ease("cubic-bezier(0,0.1,0.15,1)").end(function(){a._move(j).duration(0).end()})}}).bind(),this};var f=a.kettle;kettle.noConflict=function(){return a.kettle=f,this},typeof module!="undefined"&&module.exports&&(module.exports=kettle),a.kettle=kettle}(this,document)